(this["webpackJsonptwitch-tools"]=this["webpackJsonptwitch-tools"]||[]).push([[0],{44:function(e,t,a){},45:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),i=a(35),r=a.n(i),o=(a(44),a(3)),c=a(7),l=a(6),h=a(5),u=(a(45),a(38)),d=a(2),m=a(20),p=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e,n,s){var i;return Object(o.a)(this,a),(i=t.call(this,e,n,s,null)).connect=function(){i.ws.onopen=function(){i.ws.send(JSON.stringify({type:"PANEL_INIT",from:"PANEL",name:i.panelName})),i.interval&&clearInterval(i.interval),i.interval=setInterval((function(){i.ws.send(JSON.stringify({type:"PANEL_PING",from:"PANEL",name:i.panelName}))}),2e4)},i.ws.onmessage=function(e){var t=JSON.parse(e.data);i.listenFor.includes(t.type)&&(console.log("Received: "+JSON.stringify(t,null,5)),i.queue.push(t))},i.ws.onclose=function(e){console.log("Socket is closed. Reconnect will be attempted in 5 second.",e.reason),setTimeout((function(){i.connect()}),5e3)},i.ws.onerror=function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),i.ws.close()}},i}return a}((function e(t,a,n,s){var i=this;Object(o.a)(this,e),this.connect=function(){},this.disconnect=function(){clearInterval(i.interval),i.ws.onmessage=function(){},i.ws.onclose=function(){},i.ws.onerror=function(){},i.ws.close()},this.next=function(){if(i.queue.length<=0)return null;var e=i.queue[0];return i.queue=i.queue.slice(1),e},this.hasNext=function(){return!(i.queue.length<=0)},this.channelId=s,this.panelName=a,this.listenFor=n,this.interval=null,this.queue=[],this.ws=new m.w3cwebsocket(t)})),f=a(0),v=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).consumer=function(){if(n.ws.hasNext()){var e=n.ws.next();n.onDeath(e.eventData.count)}},n.onDeath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState((function(t){return{deaths:-1!==e?e:t.deaths+1,textScale:1}}));var t=1,a=setInterval((function(){n.state.textScale<=2&&t>0&&n.setState((function(e){return{textScale:Math.min(e.textScale+.1,2)}})),n.state.textScale>=1&&t<0&&n.setState((function(e){return{textScale:Math.max(e.textScale-.1,1)}})),n.state.textScale>=2&&t>0&&(t=-1),n.state.textScale<=1&&t<0&&clearInterval(a)}),10)},n.ws=null,n.interval=null,n.state={currentEvent:null,deaths:0,textScale:1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.ws=new p("ws://localhost:8081","DEATH_COUNTER",["DEATH_COUNT"]),this.ws.connect(),document.addEventListener("contextmenu",(function(t){e.onReset(t)})),setInterval(this.consumer,0)}},{key:"componentWillUnmount",value:function(){var e=this;document.removeEventListener("contextmenu",(function(t){e.onReset(t)})),this.ws.disconnect()}},{key:"render",value:function(){return Object(f.jsx)("div",{style:{height:"100vh",width:"100vw",userSelect:"none"},className:"App",children:Object(f.jsxs)("span",{style:{fontWeight:"bolder",fontSize:"".concat(32*this.state.textScale,"pt"),WebkitTextStroke:"2px black",WebkitTextFillColor:"white",lineHeight:"100vh",height:"100vh"},children:["Deaths: ",this.state.deaths]})})}}]),a}(s.a.Component),g=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).consumer=function(){if(n.ws.hasNext()){var e=n.ws.next();n.setState({requestList:e.eventData.requestList})}},n.showQueue=function(){n.setState({mode:"QUEUE"}),setTimeout((function(){n.setState({mode:"NEXT_UP"})}),1e4)},n.ws=null,n.interval=null,n.state={mode:"NEXT_UP",requestList:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.ws=new p("ws://localhost:8081","REQUESTS",["REQUEST"]),this.ws.connect(),setInterval(this.consumer,5e3),setInterval((function(){e.showQueue()}),6e4)}},{key:"componentWillUnmount",value:function(){this.ws.disconnect()}},{key:"render",value:function(){return Object(f.jsxs)("div",{style:{height:"100vh",width:"100vw",userSelect:"none",position:"relative"},className:"App",children:[Object(f.jsx)("div",{style:{width:"100vw",position:"absolute",bottom:"0px",left:"0px",textAlign:"center",fontSize:"20pt",WebkitTextStroke:"1px black",WebkitTextFillColor:"white"},onClick:this.showQueue,children:this.state.requestList.length>0?Object(f.jsxs)("marquee",{children:["Next up: ",this.state.requestList[this.state.requestList.length-1].request," from ",this.state.requestList[this.state.requestList.length-1].requester]}):Object(f.jsx)("marquee",{children:"No requests so far.  Make a request by donating!"})}),Object(f.jsx)("div",{style:{width:"100vw",position:"absolute",bottom:"0px",left:"0px",textAlign:"center"},children:Object(f.jsxs)("div",{className:"QUEUE"===this.state.mode?"open":"closed",style:{maxWidth:"50%",margin:"auto",padding:"0px 5px",backgroundColor:"gray",color:"white"},children:[Object(f.jsx)("strong",{children:"Coming up:"}),this.state.requestList.slice().reverse().slice(0,3).map((function(e,t){return Object(f.jsxs)("div",{style:{color:0===t?"yellow":"white"},children:[t+1,": ",e.request," from ",e.requester]},"entry-".concat(t))}))]})})]})}}]),a}(s.a.Component),b=(new URLSearchParams(window.location.search),function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).timerCallback=function(){n.videoElement&&n.videoElement.current&&(n.videoElement.current.paused||n.videoElement.current.ended)||(n.computeFrame(),n.timeOut=setTimeout((function(){n.timerCallback()}),0))},n.computeFrame=function(){if(n.videoElement.current){n.ctx1.drawImage(n.videoElement.current,0,0,n.state.vw,n.state.vh);for(var e=n.ctx1.getImageData(0,0,n.state.vw,n.state.vh),t=e.data.length,a=0;a<t;a+=4){var s=e.data[a+0],i=e.data[a+1],r=e.data[a+2];i<=177&&s<=177&&r<=177&&(e.data[a+3]=0)}n.ctx2.putImageData(e,0,0)}},n.videoElement=s.a.createRef(),n.canvasElement1=s.a.createRef(),n.canvasElement2=s.a.createRef(),n.ctx1=null,n.ctx2=null,n.timeOut=null,n.state={averageColor:{r:0,g:0,b:0},vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.videoElement.current.addEventListener("ended",(function(){e.timeOut&&clearTimeout(e.timeOut),e.props.onComplete("badapple")})),this.ctx1=this.canvasElement1.current.getContext("2d"),this.ctx2=this.canvasElement2.current.getContext("2d"),this.videoElement.current.addEventListener("play",(function(){e.timerCallback()}),!1),window.onresize=function(){e.setState({vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)})},this.videoElement.current.play()}},{key:"render",value:function(){return Object(f.jsxs)("div",{style:{overflow:"hidden"},children:[Object(f.jsx)("video",{style:{display:"none"},src:"".concat("","/videos/badapple.mp4"),controls:!1,crossOrigin:"anonymous",ref:this.videoElement}),Object(f.jsx)("canvas",{height:this.state.vh,width:this.state.vw,style:{display:"none"},ref:this.canvasElement1}),Object(f.jsx)("canvas",{height:this.state.vh,width:this.state.vw,style:{border:"1px solid black"},ref:this.canvasElement2})]})}}]),a}(s.a.Component)),y=a(12),w=a.n(y),x=a(36),j=a(14),O=(new URLSearchParams(window.location.search),function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).birdup=Object(j.a)(w.a.mark((function t(){var a,n,s;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stages[0].current.style.display="block",a=new Audio("".concat("","/sounds/birdup.mp3")),t.next=4,a.play();case 4:n=1,s=setInterval((function(){if(n>=e.stages.length)return clearInterval(s),void setTimeout((function(){var t,a=Object(x.a)(e.stages);try{for(a.s();!(t=a.n()).done;){t.value.current.style.display="none"}}catch(n){a.e(n)}finally{a.f()}setTimeout((function(){e.playing=!1,e.props.onComplete("birdup")}),5e3)}),2e3);e.stages[n++].current.style.display="block"}),300);case 6:case"end":return t.stop()}}),t)}))),e.playing=!1,e.textRef=s.a.createRef(),e.imageRef1=s.a.createRef(),e.imageRef2=s.a.createRef(),e.imageRef3=s.a.createRef(),e.imageRef4=s.a.createRef(),e.imageRef5=s.a.createRef(),e.imageRef6=s.a.createRef(),e.stages=[e.textRef,e.imageRef1,e.imageRef2,e.imageRef3,e.imageRef4,e.imageRef5,e.imageRef6],e.birdQueue=[],e.state={},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.birdup()}},{key:"render",value:function(){return Object(f.jsxs)("div",{style:{height:"100vh",width:"100vw",userSelect:"none",position:"relative"},className:"App",children:[Object(f.jsx)("img",{alt:"birdup",style:{position:"absolute",fontSize:"20px",right:"0px",bottom:"0px",height:"20%",zIndex:"101",display:"none"},ref:this.imageRef1,src:"".concat("","/images/birdup.png")}),Object(f.jsx)("img",{alt:"birdup",style:{position:"absolute",fontSize:"20px",right:"0px",bottom:"0px",height:"40%",zIndex:"102",display:"none"},ref:this.imageRef2,src:"".concat("","/images//birdup.png")}),Object(f.jsx)("img",{alt:"birdup",style:{position:"absolute",fontSize:"20px",right:"0px",bottom:"0px",height:"60%",zIndex:"103",display:"none"},ref:this.imageRef3,src:"".concat("","/images//birdup.png")}),Object(f.jsx)("img",{alt:"birdup",style:{position:"absolute",fontSize:"20px",right:"0px",bottom:"0px",height:"80%",zIndex:"104",display:"none"},ref:this.imageRef4,src:"".concat("","/images//birdup.png")}),Object(f.jsx)("img",{alt:"birdup",style:{position:"absolute",fontSize:"20px",right:"0px",bottom:"0px",height:"100%",zIndex:"105",display:"none"},ref:this.imageRef5,src:"".concat("","/images//birdup.png")}),Object(f.jsx)("img",{alt:"birdup",style:{position:"absolute",fontSize:"20px",right:"0px",bottom:"0px",height:"120%",zIndex:"106",display:"none"},ref:this.imageRef6,src:"".concat("","/images//birdup.png")}),Object(f.jsx)("div",{style:{position:"absolute",fontFamily:"Cooper Black",WebkitTextStroke:"5px black",WebkitTextFillColor:"#CE01E2",bottom:"0px",left:"50%",transform:"translate(-50%, -50%)",fontSize:"70pt",zIndex:"200",display:"none"},ref:this.textRef,children:"BIRD UP!"})]})}}]),a}(s.a.Component)),k=a(13),E=a.n(k),S=function(e){var t,a,s=!1,i=!1,r=null,o=1440;function c(){this.load.image("ground","/images/ground.png"),this.load.image("water","/images/water.png"),this.load.spritesheet("slime","/images/slime-sprite.png",{frameWidth:80,frameHeight:80}),this.load.spritesheet("link","/images/link.png",{frameWidth:80,frameHeight:160}),this.load.audio("bgm",["/sounds/bgm.mp3"]),this.load.audio("battle",["/sounds/battle.wav"]),this.load.audio("hurt",["/sounds/hurt.wav"]),this.load.audio("die",["/sounds/die.wav"]),this.load.audio("fanfare",["/sounds/fanfare.wav"])}function l(){var n=this,c=e.variable,l=this.game.scale.width/o,h=this.textures.get("ground").getSourceImage().width*l,u=this.textures.get("ground").getSourceImage().height*l,d=this.textures.get("water").getSourceImage().width*l,m=[(100*Math.random()+200)*l,(100*Math.random()+200)*l];t=this.physics.add.staticGroup(),a=this.physics.add.staticGroup(),this.anims.create({key:"wobble",frames:this.anims.generateFrameNumbers("slime",{start:0,end:2}),frameRate:10,repeat:-1}),this.anims.create({key:"idle",frames:this.anims.generateFrameNumbers("link",{start:0,end:0}),frameRate:10,repeat:-1}),this.anims.create({key:"hurt",frames:this.anims.generateFrameNumbers("link",{start:1,end:1}),frameRate:10,repeat:-1});var p=this.sound.add("bgm",{loop:!0,volume:.25}),f=this.sound.add("battle",{loop:!1}),v=this.sound.add("hurt",{loop:!1,volume:3}),g=this.sound.add("die",{loop:!1}),b=this.sound.add("fanfare",{loop:!1,volume:1});g.once("complete",(function(){n.scene.stop(),n.sys.game.destroy(!0),clearTimeout(r),e.onComplete()})),b.once("complete",(function(){n.scene.stop(),n.sys.game.destroy(!0),clearTimeout(r),e.onComplete()})),f.play(),p.play();var y=this.game.scale.height-(u-m[1]),w=this.physics.add.sprite(h+200,y,"link");w.setOrigin(0,1),w.setBounce(.5),w.setScale(l),w.setGravityY(300),w.refreshBody(),w.body.setCollideWorldBounds(!0),w.anims.play("idle",!0),this.physics.add.collider(w,t);for(var x=0;x<c;x++){var j=this.physics.add.sprite(.5*-x,Math.random()*(this.game.scale.height-100)-(u-m[0]),"slime");j.setScale(l),j.setBounce(Math.min(1,Math.random()+.5)),j.body.setGravity(400),j.anims.play("wobble",!0),j.setVelocityX(300*Math.random()),this.physics.add.collider(j,t),this.physics.add.overlap(w,j,(function(){s||(s=!0,v.play()),w.play("hurt"),w.setVelocity(500,-50),w.body.useDamping=!0,w.setDrag(.99)}),null,this),this.physics.add.overlap(w,a,(function(){i||(i=!0,g.play()),p.stop(),w.play("hurt"),w.setVelocity(0,50)}),null,this)}for(var O=0;O<this.game.scale.width;){var k=a.create(0,0,"water");k.setScale(l),k.setOrigin(0,1),k.x=O,k.y=this.game.scale.height+100,k.refreshBody(),O+=d}for(var E=0;E<2;E++){var S=E*(h+200),R=m[E],C=t.create(S,this.game.scale.height+R,"ground");C.setOrigin(0,1),C.setScale(l),C.refreshBody()}r=setTimeout((function(){p.stop(),b.play()}),1e4)}function h(){}return Object(n.useEffect)((function(){!function(){var e={type:E.a.AUTO,width:"100vw",height:"100vh",transparent:!0,parent:"phaser",scene:{preload:c,create:l,update:h},physics:{default:"arcade",arcade:{gravity:{y:200}}}};new E.a.Game(e)}()}),[]),Object(f.jsx)("div",{children:Object(f.jsx)("div",{id:"phaser"})})},R=function(e){var t=0,a=[],s=!1,i=1440;function r(){this.load.image("ground","/images/ground.png"),this.load.image("water","/images/water.png"),this.load.spritesheet("yoshiGreen","/images/yoshi/yoshi-walk.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("yoshiBlue","/images/yoshi/yoshi-walk-blue.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("yoshiPurple","/images/yoshi/yoshi-walk-purple.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("yoshiPink","/images/yoshi/yoshi-walk-pink.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("yoshiBlack","/images/yoshi/yoshi-walk-black.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("yoshiYellow","/images/yoshi/yoshi-walk-yellow.png",{frameWidth:128,frameHeight:128}),this.load.audio("fanfare",["/sounds/yoshi/yoshi-fanfare.mp3"]),this.load.audio("badum",["/sounds/yoshi/yoshi-tongue.mp3"])}function o(){var n=this,r=this.game.scale.width/i,o=e.variable;this.anims.create({key:"walkGreen",frames:this.anims.generateFrameNumbers("yoshiGreen",{start:0,end:9}),frameRate:15,repeat:-1}),this.anims.create({key:"walkPurple",frames:this.anims.generateFrameNumbers("yoshiPurple",{start:0,end:9}),frameRate:15,repeat:-1}),this.anims.create({key:"walkPink",frames:this.anims.generateFrameNumbers("yoshiPink",{start:0,end:9}),frameRate:15,repeat:-1}),this.anims.create({key:"walkBlue",frames:this.anims.generateFrameNumbers("yoshiBlue",{start:0,end:9}),frameRate:15,repeat:-1}),this.anims.create({key:"walkBlack",frames:this.anims.generateFrameNumbers("yoshiBlack",{start:0,end:9}),frameRate:15,repeat:-1}),this.anims.create({key:"walkYellow",frames:this.anims.generateFrameNumbers("yoshiYellow",{start:0,end:9}),frameRate:15,repeat:-1});var c=this.sound.add("fanfare",{loop:!0,volume:1}),l=this.sound.add("badum",{loop:!1,volume:1}),h=Math.ceil(100*(Math.log2(o)+1)),u=Math.ceil(5e3/o),d=["Green","Purple","Blue","Pink","Yellow","Black"],m=this.physics.add.sprite(this.game.scale.width+256,0,"ground");m.setOrigin(0,0),m.displayHeight=this.game.scale.height,t=o,c.play();for(var p=function(e){var s=d[Math.floor(Math.random()*d.length)],i=n.physics.add.sprite(-e*u,Math.random()*n.game.scale.height,"yoshi".concat(s));i.setScale(r),i.body.setGravity(0),i.anims.play("walk".concat(s),!0),i.setVelocityX(h),a.push(i),n.physics.add.overlap(i,m,(function(){l.play(),i.destroy(),t--}),null,n)},f=0;f<o;f++)p(f);setTimeout((function(){s=!0}),15e3)}function c(){t<=0&&s&&(this.scene.stop(),this.sys.game.destroy(!0),e.onComplete&&e.onComplete())}return Object(n.useEffect)((function(){!function(){var e={type:E.a.AUTO,width:"100vw",height:"100vh",transparent:!0,parent:"phaser",scene:{preload:r,create:o,update:c},physics:{default:"arcade",arcade:{gravity:{y:0}}}};new E.a.Game(e)}()}),[]),Object(f.jsx)("div",{children:Object(f.jsx)("div",{id:"phaser"})})},C=function(e){var t=0,a=!1,s=1440;function i(){var t=this;this.load.image("ground","/images/ground.png"),e.config.sprites.forEach((function(e,a){t.load.spritesheet("sprite".concat(a),e.file,{frameWidth:e.frameWidth,frameHeight:e.frameHeight})})),this.load.audio("music",[e.config.music.file]),this.load.audio("leaving",[e.config.leavingSound.file])}function r(){var n=this,i=this.game.scale.width/s,r=e.variable;e.config.sprites.forEach((function(e,t){n.anims.create({key:"animation".concat(t),frames:n.anims.generateFrameNumbers("sprite".concat(t),{start:e.startFrame,end:e.endFrame}),frameRate:e.frameRate,repeat:-1})}));var o=this.sound.add("music",{loop:!0,volume:e.config.music.volume}),c=this.sound.add("leaving",{loop:!1,volume:e.config.leavingSound.volume}),l=100*Math.ceil(Math.log2(r)+1),h=Math.ceil(5e3/r),u=this.physics.add.sprite(this.game.scale.width+256,0,"ground");u.setOrigin(0,0),u.displayHeight=this.game.scale.height,t=r,o.play();for(var d=function(a){var s=Math.floor(Math.random()*e.config.sprites.length),r=n.physics.add.sprite(-a*h,Math.random()*n.game.scale.height,"sprite".concat(s));r.setScale(i),r.body.setGravity(0),r.anims.play("animation".concat(s),!0),r.setVelocityX(l),n.physics.add.overlap(r,u,(function(){c.play(),r.destroy(),t--}),null,n)},m=0;m<r;m++)d(m);setTimeout((function(){a=!0}),15e3)}function o(){t<=0&&a&&(this.scene.stop(),this.sys.game.destroy(!0),e.onComplete&&e.onComplete())}return Object(n.useEffect)((function(){!function(){var e={type:E.a.AUTO,width:"100vw",height:"100vh",transparent:!0,parent:"phaser",scene:{preload:i,create:r,update:o},physics:{default:"arcade",arcade:{gravity:{y:0}}}};new E.a.Game(e)}()}),[]),Object(f.jsx)("div",{children:Object(f.jsx)("div",{id:"phaser"})})},D=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).timerCallback=function(){n.videoElement&&n.videoElement.current&&(n.videoElement.current.paused||n.videoElement.current.ended)||(n.computeFrame(),n.timeOut=setTimeout((function(){n.timerCallback()}),0))},n.computeFrame=function(){if(n.videoElement.current){n.ctx1.drawImage(n.videoElement.current,0,0,n.state.vw,n.state.vh);for(var e=n.ctx1.getImageData(0,0,n.state.vw,n.state.vh),t=e.data.length,a=0;a<t;a+=4){var s=e.data[a+0],i=e.data[a+1],r=e.data[a+2];"green"===n.props.chromaKey?i>s+r&&(e.data[a+3]=0):"red"===n.props.chromaKey?s>i+r&&(e.data[a+3]=0):"blue"===n.props.chromaKey&&r>s+i&&(e.data[a+3]=0)}n.ctx2.putImageData(e,0,0)}},n.videoElement=s.a.createRef(),n.canvasElement1=s.a.createRef(),n.canvasElement2=s.a.createRef(),n.ctx1=null,n.ctx2=null,n.timeOut=null,n.state={averageColor:{r:0,g:0,b:0},vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.videoElement.current.addEventListener("ended",(function(){e.timeOut&&clearTimeout(e.timeOut),e.props.onComplete("randomcustomvideo")})),this.ctx1=this.canvasElement1.current.getContext("2d"),this.ctx2=this.canvasElement2.current.getContext("2d"),this.videoElement.current.addEventListener("play",(function(){e.timerCallback()}),!1),window.onresize=function(){e.setState({vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)})},this.videoElement.current.volume=this.props.volume,this.videoElement.current.play()}},{key:"render",value:function(){Math.ceil(7*Math.random());return Object(f.jsxs)("div",{style:{overflow:"hidden"},children:[Object(f.jsx)("video",{style:{display:"none"},src:this.props.url,controls:!1,crossOrigin:"anonymous",ref:this.videoElement}),Object(f.jsx)("canvas",{height:this.state.vh,width:this.state.vw,style:{display:"none"},ref:this.canvasElement1}),Object(f.jsx)("canvas",{height:this.state.vh,width:this.state.vw,style:{border:"1px solid black"},ref:this.canvasElement2})]})}}]),a}(s.a.Component),N=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).consumer=function(){if(n.ws.hasNext()&&!n.state.currentEvent){console.log("EVENT");var e=n.ws.next();n.setState({currentEvent:e})}else console.log("SKIPPING: ".concat(n.ws.hasNext()," || ").concat(n.state.currentEvent))},n.reset=function(){n.setState({currentEvent:null})},n.ws=null,n.interval=null,n.state={currentEvent:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.ws=new p("ws://localhost:8081","MULTI",["BIRDUP","BADAPPLE","VIDEO","DYNAMIC"]),this.ws.connect(),setInterval(this.consumer,5e3)}},{key:"componentWillUnmount",value:function(){this.ws.disconnect()}},{key:"render",value:function(){var e=null;if(console.log(JSON.stringify(this.state.currentEvent,null,5)),!this.state.currentEvent)return Object(f.jsx)("div",{});switch(this.state.currentEvent.type){case"BADAPPLE":e=Object(f.jsx)(b,{onComplete:this.reset,requester:this.state.currentEvent.eventData.requester});break;case"BIRDUP":e=Object(f.jsx)(O,{onComplete:this.reset,message:this.state.currentEvent.eventData.message,requester:this.state.currentEvent.eventData.requester});break;case"VIDEO":e=Object(f.jsx)(D,{onComplete:this.reset,message:this.state.currentEvent.eventData.message,requester:this.state.currentEvent.eventData.requester,url:this.state.currentEvent.eventData.url,mediaName:this.state.currentEvent.eventData.mediaName,volume:this.state.currentEvent.eventData.volume,chromaKey:this.state.currentEvent.eventData.chromaKey});break;case"DYNAMIC":"YOSHI"===this.state.currentEvent.eventData.raidTheme?e=Object(f.jsx)(R,{onComplete:this.reset,message:this.state.currentEvent.eventData.message,variable:this.state.currentEvent.eventData.variable}):"ZELDA2"===this.state.currentEvent.eventData.raidTheme?e=Object(f.jsx)(S,{onComplete:this.reset,message:this.state.currentEvent.eventData.message,variable:this.state.currentEvent.eventData.variable}):"STORED"===this.state.currentEvent.eventData.raidTheme&&(e=Object(f.jsx)(C,{onComplete:this.reset,message:this.state.currentEvent.eventData.message,variable:this.state.currentEvent.eventData.variable,config:this.state.currentEvent.eventData.raidCustomTheme}));break;case"DEFAULT":this.reset()}return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"multContainer",children:[e,Object(f.jsx)("span",{className:"alert-text",children:this.state.currentEvent.eventData.message})]})})}}]),a}(s.a.Component),I=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).consumer=Object(j.a)(w.a.mark((function e(){var t,a,s,i,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.ws.hasNext()&&!n.consumerLocked){e.next=2;break}return e.abrupt("return");case 2:return t=n.ws.next(),a=t.eventData,s=a.url,i=a.volume,n.consumerLocked=!0,r=new Audio(s),n.setState({soundPlaying:!0}),r.addEventListener("ended",(function(){n.setState({soundPlaying:!1}),setTimeout((function(){n.consumerLocked=!1}),5e3)})),r.volume=i,e.next=11,r.play();case 11:case"end":return e.stop()}}),e)}))),n.ws=null,n.consumerLocked=!1,n.state={soundPlaying:!1,requester:null,mediaName:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.ws=new p("ws://localhost:8081","SOUND_PLAYER",["AUDIO"]),this.ws.connect(),setInterval(this.consumer,5e3)}},{key:"componentWillUnmount",value:function(){this.ws.disconnect()}},{key:"render",value:function(){return Object(f.jsx)("div",{style:{height:"100vh",width:"100vw",userSelect:"none"},className:"App",children:this.state.soundPlaying?Object(f.jsxs)("div",{children:[Object(f.jsx)("img",{style:{position:"absolute",width:"100px",height:"100px",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},src:"".concat("","/images/speaker.png")}),Object(f.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"20pt",WebkitTextStroke:"1px black",WebkitTextFillColor:"white"},children:this.state.message})]}):null})}}]),a}(s.a.Component),T=a(16),M={YOSHI:{message:"Incoming raid from ${raider} with a party of ${raidSize}!",sprites:[{file:"/images/yoshi/yoshi-walk.png",startFrame:0,endFrame:9,frameWidth:128,frameHeight:128,frameRate:15},{file:"/images/yoshi/yoshi-walk-black.png",startFrame:0,endFrame:9,frameWidth:128,frameHeight:128,frameRate:15},{file:"/images/yoshi/yoshi-walk-blue.png",startFrame:0,endFrame:9,frameWidth:128,frameHeight:128,frameRate:15},{file:"/images/yoshi/yoshi-walk-pink.png",startFrame:0,endFrame:9,frameWidth:128,frameHeight:128,frameRate:15},{file:"/images/yoshi/yoshi-walk-purple.png",startFrame:0,endFrame:9,frameWidth:128,frameHeight:128,frameRate:15},{file:"/images/yoshi/yoshi-walk-yellow.png",startFrame:0,endFrame:9,frameWidth:128,frameHeight:128,frameRate:15}],music:{file:"/sounds/yoshi/yoshi-fanfare.mp3",volume:1},leavingSound:{file:"/sounds/yoshi/yoshi-tongue.mp3",volume:1}},SKULLMAN:{message:"HOLY SHIT! ${raider} raided with a party of ${raidSize}!",sprites:[{file:"/images/skullman/skullman-walk.png",startFrame:0,endFrame:9,frameWidth:99,frameHeight:128,frameRate:15}],music:{file:"/sounds/skullman/battle.mp3",volume:1},leavingSound:{file:"/sounds/skullman/ash-groovy.mp3",volume:3}},CHAIR:{message:"CHEESE IT UP! ${raider} raided with a party of ${raidSize}!",sprites:[{file:"/images/chair/cheesesteak-walk.png",startFrame:0,endFrame:5,frameWidth:128,frameHeight:128,frameRate:15},{file:"/images/chair/yuu.png",startFrame:24,endFrame:29,frameWidth:128,frameHeight:128,frameRate:15},{file:"/images/chair/tanako.png",startFrame:30,endFrame:41,frameWidth:128,frameHeight:128,frameRate:15}],music:{file:"/sounds/chair/music.mp3",volume:1},leavingSound:{file:"/sounds/chair/cheeseitup.wav",volume:1}}},F=a(37),W=a.n(F),L=function(){var e=Object(j.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.get("https://deusprogrammer.com/api/twitch/raid-configs/".concat(t),{headers:{"X-Access-Token":localStorage.getItem("accessToken")}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(n.useState)(!1),t=Object(T.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)("daddyfartbux"),r=Object(T.a)(i,2),o=r[0],c=r[1],l=Object(n.useState)(100),h=Object(T.a)(l,2),u=h[0],d=h[1],m=Object(n.useState)("CUSTOM"),p=Object(T.a)(m,2),v=p[0],g=p[1],b=Object(n.useState)("SKULLMAN"),y=Object(T.a)(b,2),x=y[0],O=y[1],k=Object(n.useState)({}),E=Object(T.a)(k,2),D=E[0],N=E[1];Object(n.useEffect)(Object(j.a)(w.a.mark((function e(){var t,a,n,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new URLSearchParams(window.location.search),a=t.get("theme"),n=t.get("key"),c(t.get("raider")?t.get("raider"):"daddyfartbux"),d(t.get("raidSize")?t.get("raidSize"):10),g(t.get("theme")?t.get("theme"):"YOSHI"),O(t.get("key")?t.get("key"):"SKULLMAN"),"STORED"!==a){e.next=12;break}return e.next=10,L(n);case 10:s=e.sent,N(s);case 12:case"end":return e.stop()}}),e)}))),[]);var I=null;switch(v){case"YOSHI":I=Object(f.jsx)(R,{raider:o,raidSize:u,onComplete:function(){s(!1)}});break;case"ZELDA":I=Object(f.jsx)(S,{raider:o,raidSize:u,onComplete:function(){s(!1)}});break;case"CUSTOM":I=Object(f.jsx)(C,{raider:o,raidSize:u,config:M[x],onComplete:function(){s(!1)}});case"STORED":I=Object(f.jsx)(C,{raider:o,raidSize:u,config:D,onComplete:function(){s(!1)}})}return Object(f.jsx)("div",{children:a?I:Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{children:["Testing with size ",Object(f.jsx)("b",{children:u})," and raider ",Object(f.jsx)("b",{children:o})]}),Object(f.jsx)("button",{onClick:function(){s(!0)},children:"Click to Test"}),Object(f.jsx)("h3",{children:"Debug"}),Object(f.jsx)("pre",{children:JSON.stringify(D,null,5)})]})})},A=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(f.jsx)(u.a,{children:Object(f.jsxs)(d.c,{children:[Object(f.jsx)(d.a,{path:"".concat("","/tools/raid-test"),component:H,exact:!0}),Object(f.jsx)(d.a,{path:"".concat("","/overlays/multi"),component:N,exact:!0}),Object(f.jsx)(d.a,{path:"".concat("","/overlays/death-counter"),component:v,exact:!0}),Object(f.jsx)(d.a,{path:"".concat("","/overlays/sound-player"),component:I,exact:!0}),Object(f.jsx)(d.a,{path:"".concat("","/overlays/requests"),component:g,exact:!0})]})})}}]),a}(s.a.Component),P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,76)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),i(e),r(e)}))};window.speechSynthesis.onvoiceschanged=function(){window.maleVoice=window.speechSynthesis.getVoices().find((function(e){return"Microsoft David - English (United States)"===e.name})),window.femaleVoice=window.speechSynthesis.getVoices().find((function(e){return"Microsoft Zira - English (United States)"===e.name})),console.log("MAN:   "+window.maleVoice),console.log("WOMAN: "+window.femaleVoice)},r.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(A,{})}),document.getElementById("root")),P()}},[[75,1,2]]]);
//# sourceMappingURL=main.dd5699d7.chunk.js.map