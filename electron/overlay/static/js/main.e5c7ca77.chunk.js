(this["webpackJsonptwitch-tools"]=this["webpackJsonptwitch-tools"]||[]).push([[0],{46:function(e,t,n){},47:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),i=n(37),o=n.n(i),r=(n(46),n(2)),c=n(6),l=n(4),u=n(3),h=(n(47),n(17)),d=n(5),m=n(25),p=function e(t,n,a,s){var i=this;Object(r.a)(this,e),this.connect=function(){},this.disconnect=function(){clearInterval(i.interval),i.ws.onmessage=function(){},i.ws.onclose=function(){},i.ws.onerror=function(){},i.ws.close()},this.next=function(){if(i.queue.length<=0)return null;var e=i.queue[0];return i.queue=i.queue.slice(1),e},this.hasNext=function(){return!(i.queue.length<=0)},this.channelId=s,this.panelName=n,this.listenFor=a,this.interval=null,this.queue=[],this.ws=new m.w3cwebsocket(t)},v=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e,a,s,i){var o;return Object(r.a)(this,n),(o=t.call(this,e,a,s,i)).connect=function(){o.ws.onopen=function(){o.ws.send(JSON.stringify({type:"PANEL_INIT",from:"PANEL",name:o.panelName})),o.interval&&clearInterval(o.interval),o.interval=setInterval((function(){o.ws.send(JSON.stringify({type:"PANEL_PING",from:"PANEL",name:o.panelName}))}),2e4)},o.ws.onmessage=function(e){var t=JSON.parse(e.data);o.listenFor.includes(t.type)&&(console.log("Received: "+JSON.stringify(t,null,5)),o.queue.push(t))},o.ws.onclose=function(e){console.log("Socket is closed. Reconnect will be attempted in 5 second.",e.reason),setTimeout((function(){o.connect()}),5e3)},o.ws.onerror=function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),o.ws.close()}},o}return n}(p),f=function(e,t,n){return console.log("BUILD TARGET: electron"),new v("ws://localhost:8081",e,t)},b=n(0),g=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).consumer=function(){if(a.ws.hasNext()){var e=a.ws.next();a.onDeath(e.eventData.count)}},a.onReset=function(e){return a.setState({deaths:0,textScale:1}),e.preventDefault(),!1},a.onDeath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;a.setState((function(t){return{deaths:-1!==e?e:t.deaths+1,textScale:1}}));var t=1,n=setInterval((function(){a.state.textScale<=2&&t>0&&a.setState((function(e){return{textScale:Math.min(e.textScale+.1,2)}})),a.state.textScale>=1&&t<0&&a.setState((function(e){return{textScale:Math.max(e.textScale-.1,1)}})),a.state.textScale>=2&&t>0&&(t=-1),a.state.textScale<=1&&t<0&&clearInterval(n)}),10)},a.ws=null,a.interval=null,a.state={currentEvent:null,deaths:0,textScale:1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(window.location.search);this.ws=f("DEATH_COUNTER",["DEATH_COUNT"],t.get("channelId")),this.ws.connect(),setInterval(this.consumer,0),document.addEventListener("contextmenu",(function(t){e.onReset(t)}))}},{key:"componentWillUnmount",value:function(){var e=this;document.removeEventListener("contextmenu",(function(t){e.onReset(t)})),this.ws.disconnect()}},{key:"render",value:function(){return Object(b.jsx)("div",{style:{height:"100vh",width:"100vw",userSelect:"none"},className:"App",children:Object(b.jsxs)("span",{style:{fontWeight:"bolder",fontSize:"".concat(32*this.state.textScale,"pt"),WebkitTextStroke:"2px black",WebkitTextFillColor:"white",lineHeight:"100vh",height:"100vh"},children:["Deaths: ",this.state.deaths]})})}}]),n}(s.a.Component),j=n(8),x=function(){var e=Object(a.useState)(0),t=Object(j.a)(e,2),n=t[0],s=t[1];return Object(b.jsxs)("div",{style:{textAlign:"center",margin:"auto",width:"100vw",height:"100vh",backgroundColor:"rgb(".concat(n,", ").concat(n,", ").concat(n,")"),color:"rgb(".concat(255-n,", ").concat(255-n,", ").concat(255-n,")")},children:[Object(b.jsx)("h1",{children:"Twitch Tools"}),Object(b.jsxs)("div",{children:[Object(b.jsx)(h.b,{to:"".concat("","/death-counter"),children:"Death Counter"}),Object(b.jsx)("br",{}),Object(b.jsx)(h.b,{to:"".concat("","/sound-player"),children:"Sound Player"}),Object(b.jsx)("br",{}),Object(b.jsx)(h.b,{to:"".concat("","/birdup"),children:"BIRD UP"}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"range",value:n,max:255,onChange:function(e){var t=e.target.value;s(t)}}),Object(b.jsx)("span",{children:n})]})]})},w=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).consumer=function(){if(a.ws.hasNext()){var e=a.ws.next();a.setState({requestList:e.eventData.requestList})}},a.showQueue=function(){a.setState({mode:"QUEUE"}),setTimeout((function(){a.setState({mode:"NEXT_UP"})}),1e4)},a.ws=null,a.interval=null,a.state={mode:"NEXT_UP",requestList:[]},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(window.location.search);this.ws=f("REQUESTS",["REQUEST"],t.get("channelId")),this.ws.connect(),setInterval(this.consumer,0),setInterval((function(){e.showQueue()}),6e4)}},{key:"componentWillUnmount",value:function(){this.ws.disconnect()}},{key:"render",value:function(){return Object(b.jsxs)("div",{style:{height:"100vh",width:"100vw",userSelect:"none",position:"relative"},className:"App",children:[Object(b.jsx)("div",{style:{width:"100vw",position:"absolute",bottom:"0px",left:"0px",textAlign:"center",fontSize:"20pt",WebkitTextStroke:"1px black",WebkitTextFillColor:"white"},onClick:this.showQueue,children:this.state.requestList.length>0?Object(b.jsxs)("marquee",{children:["Next up: ",this.state.requestList[this.state.requestList.length-1].request," from ",this.state.requestList[this.state.requestList.length-1].requester]}):Object(b.jsx)("marquee",{children:"No requests so far.  Make a request by donating!"})}),Object(b.jsx)("div",{style:{width:"100vw",position:"absolute",bottom:"0px",left:"0px",textAlign:"center"},children:Object(b.jsxs)("div",{className:"QUEUE"===this.state.mode?"open":"closed",style:{maxWidth:"50%",margin:"auto",padding:"0px 5px",backgroundColor:"gray",color:"white"},children:[Object(b.jsx)("strong",{children:"Coming up:"}),this.state.requestList.slice().reverse().slice(0,3).map((function(e,t){return Object(b.jsxs)("div",{style:{color:0===t?"yellow":"white"},children:[t+1,": ",e.request," from ",e.requester]},"entry-".concat(t))}))]})})]})}}]),n}(s.a.Component),y=n(13),O=n.n(y),S=n(39),k=n(14),E=(new URLSearchParams(window.location.search),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).birdup=Object(k.a)(O.a.mark((function t(){var n,a,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stages[0].current.style.display="block",n=new Audio("".concat("","/sounds/birdup.mp3")),t.next=4,n.play();case 4:a=1,s=setInterval((function(){if(a>=e.stages.length)return clearInterval(s),void setTimeout((function(){var t,n=Object(S.a)(e.stages);try{for(n.s();!(t=n.n()).done;){t.value.current.style.display="none"}}catch(a){n.e(a)}finally{n.f()}setTimeout((function(){e.playing=!1,e.props.onComplete("birdup")}),5e3)}),2e3);e.stages[a++].current.style.display="block"}),300);case 6:case"end":return t.stop()}}),t)}))),e.playing=!1,e.textRef=s.a.createRef(),e.imageRef1=s.a.createRef(),e.imageRef2=s.a.createRef(),e.imageRef3=s.a.createRef(),e.imageRef4=s.a.createRef(),e.imageRef5=s.a.createRef(),e.imageRef6=s.a.createRef(),e.stages=[e.textRef,e.imageRef1,e.imageRef2,e.imageRef3,e.imageRef4,e.imageRef5,e.imageRef6],e.birdQueue=[],e.state={},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.birdup()}},{key:"render",value:function(){return Object(b.jsxs)("div",{style:{height:"100vh",width:"100vw",userSelect:"none",position:"relative"},className:"App",children:[Object(b.jsx)("img",{alt:"birdup",style:{position:"absolute",fontSize:"20px",right:"0px",bottom:"0px",height:"20%",zIndex:"101",display:"none"},ref:this.imageRef1,src:"".concat("","/images/birdup.png")}),Object(b.jsx)("img",{alt:"birdup",style:{position:"absolute",fontSize:"20px",right:"0px",bottom:"0px",height:"40%",zIndex:"102",display:"none"},ref:this.imageRef2,src:"".concat("","/images//birdup.png")}),Object(b.jsx)("img",{alt:"birdup",style:{position:"absolute",fontSize:"20px",right:"0px",bottom:"0px",height:"60%",zIndex:"103",display:"none"},ref:this.imageRef3,src:"".concat("","/images//birdup.png")}),Object(b.jsx)("img",{alt:"birdup",style:{position:"absolute",fontSize:"20px",right:"0px",bottom:"0px",height:"80%",zIndex:"104",display:"none"},ref:this.imageRef4,src:"".concat("","/images//birdup.png")}),Object(b.jsx)("img",{alt:"birdup",style:{position:"absolute",fontSize:"20px",right:"0px",bottom:"0px",height:"100%",zIndex:"105",display:"none"},ref:this.imageRef5,src:"".concat("","/images//birdup.png")}),Object(b.jsx)("img",{alt:"birdup",style:{position:"absolute",fontSize:"20px",right:"0px",bottom:"0px",height:"120%",zIndex:"106",display:"none"},ref:this.imageRef6,src:"".concat("","/images//birdup.png")}),Object(b.jsx)("div",{style:{position:"absolute",fontFamily:"Cooper Black",WebkitTextStroke:"5px black",WebkitTextFillColor:"#CE01E2",bottom:"0px",left:"50%",transform:"translate(-50%, -50%)",fontSize:"70pt",zIndex:"200",display:"none"},ref:this.textRef,children:"BIRD UP!"})]})}}]),n}(s.a.Component)),T=n(18),I=n.n(T),C=function(e){var t,n,s=!1,i=!1,o=null,r=1440;function c(){this.load.image("ground","/images/ground.png"),this.load.image("water","/images/water.png"),this.load.spritesheet("slime","/images/slime-sprite.png",{frameWidth:80,frameHeight:80}),this.load.spritesheet("link","/images/link.png",{frameWidth:80,frameHeight:160}),this.load.audio("bgm",["/sounds/bgm.mp3"]),this.load.audio("battle",["/sounds/battle.wav"]),this.load.audio("hurt",["/sounds/hurt.wav"]),this.load.audio("die",["/sounds/die.wav"]),this.load.audio("fanfare",["/sounds/fanfare.wav"])}function l(){var a=this,c=e.variable,l=this.game.scale.width/r,u=this.textures.get("ground").getSourceImage().width*l,h=this.textures.get("ground").getSourceImage().height*l,d=this.textures.get("water").getSourceImage().width*l,m=[(100*Math.random()+200)*l,(100*Math.random()+200)*l];t=this.physics.add.staticGroup(),n=this.physics.add.staticGroup(),this.anims.create({key:"wobble",frames:this.anims.generateFrameNumbers("slime",{start:0,end:2}),frameRate:10,repeat:-1}),this.anims.create({key:"idle",frames:this.anims.generateFrameNumbers("link",{start:0,end:0}),frameRate:10,repeat:-1}),this.anims.create({key:"hurt",frames:this.anims.generateFrameNumbers("link",{start:1,end:1}),frameRate:10,repeat:-1});var p=this.sound.add("bgm",{loop:!0,volume:.25}),v=this.sound.add("battle",{loop:!1}),f=this.sound.add("hurt",{loop:!1,volume:3}),b=this.sound.add("die",{loop:!1}),g=this.sound.add("fanfare",{loop:!1,volume:1});b.once("complete",(function(){a.scene.stop(),a.sys.game.destroy(!0),clearTimeout(o),e.onComplete()})),g.once("complete",(function(){a.scene.stop(),a.sys.game.destroy(!0),clearTimeout(o),e.onComplete()})),v.play(),p.play();var j=this.game.scale.height-(h-m[1]),x=this.physics.add.sprite(u+200,j,"link");x.setOrigin(0,1),x.setBounce(.5),x.setScale(l),x.setGravityY(300),x.refreshBody(),x.body.setCollideWorldBounds(!0),x.anims.play("idle",!0),this.physics.add.collider(x,t);for(var w=0;w<c;w++){var y=this.physics.add.sprite(.5*-w,Math.random()*(this.game.scale.height-100)-(h-m[0]),"slime");y.setScale(l),y.setBounce(Math.min(1,Math.random()+.5)),y.body.setGravity(400),y.anims.play("wobble",!0),y.setVelocityX(300*Math.random()),this.physics.add.collider(y,t),this.physics.add.overlap(x,y,(function(){s||(s=!0,f.play()),x.play("hurt"),x.setVelocity(500,-50),x.body.useDamping=!0,x.setDrag(.99)}),null,this),this.physics.add.overlap(x,n,(function(){i||(i=!0,b.play()),p.stop(),x.play("hurt"),x.setVelocity(0,50)}),null,this)}for(var O=0;O<this.game.scale.width;){var S=n.create(0,0,"water");S.setScale(l),S.setOrigin(0,1),S.x=O,S.y=this.game.scale.height+100,S.refreshBody(),O+=d}for(var k=0;k<2;k++){var E=k*(u+200),T=m[k],I=t.create(E,this.game.scale.height+T,"ground");I.setOrigin(0,1),I.setScale(l),I.refreshBody()}o=setTimeout((function(){p.stop(),g.play()}),1e4)}function u(){}return Object(a.useEffect)((function(){!function(){var e={type:I.a.AUTO,width:"100vw",height:"100vh",transparent:!0,parent:"phaser",scene:{preload:c,create:l,update:u},physics:{default:"arcade",arcade:{gravity:{y:200}}}};new I.a.Game(e)}()}),[]),Object(b.jsx)("div",{children:Object(b.jsx)("div",{id:"phaser"})})},R=function(e){var t=0,n=!1,s=1440;function i(){var t=this;this.load.image("ground","/images/ground.png"),e.config.sprites.forEach((function(e,n){t.load.spritesheet("sprite".concat(n),e.file,{frameWidth:e.frameWidth,frameHeight:e.frameHeight})})),this.load.audio("music",[e.config.music.file]),this.load.audio("leaving",[e.config.leavingSound.file])}function o(){var a=this,i=this.game.scale.width/s,o=e.variable;e.message;e.config.sprites.forEach((function(e,t){a.anims.create({key:"animation".concat(t),frames:a.anims.generateFrameNumbers("sprite".concat(t),{start:e.startFrame,end:e.endFrame}),frameRate:e.frameRate,repeat:-1})}));var r=this.sound.add("music",{loop:!0,volume:e.config.music.volume}),c=this.sound.add("leaving",{loop:!1,volume:e.config.leavingSound.volume}),l=100*Math.ceil(Math.log2(o)+1),u=Math.ceil(5e3/o),h=this.physics.add.sprite(this.game.scale.width+256,0,"ground");h.setOrigin(0,0),h.displayHeight=this.game.scale.height,t=o,r.play();for(var d=function(n){var s=Math.floor(Math.random()*e.config.sprites.length),o=a.physics.add.sprite(-n*u,Math.random()*a.game.scale.height,"sprite".concat(s));o.setScale(i),o.body.setGravity(0),o.anims.play("animation".concat(s),!0),o.setVelocityX(l),a.physics.add.overlap(o,h,(function(){c.play(),o.destroy(),t--}),null,a)},m=0;m<o;m++)d(m);setTimeout((function(){n=!0}),15e3)}function r(){t<=0&&n&&(this.scene.stop(),this.sys.game.destroy(!0),e.onComplete&&e.onComplete())}return Object(a.useEffect)((function(){!function(){var e={type:I.a.AUTO,width:"100vw",height:"100vh",transparent:!0,parent:"phaser",scene:{preload:i,create:o,update:r},physics:{default:"arcade",arcade:{gravity:{y:0}}}};new I.a.Game(e)}()}),[]),Object(b.jsx)("div",{children:Object(b.jsx)("div",{id:"phaser"})})},D=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).timerCallback=function(){a.videoElement&&a.videoElement.current&&(a.videoElement.current.paused||a.videoElement.current.ended)||(a.computeFrame(),a.timeOut=setTimeout((function(){a.timerCallback()}),0))},a.computeFrame=function(){if(a.videoElement.current){a.ctx1.drawImage(a.videoElement.current,0,0,a.state.vw,a.state.vh);for(var e=a.ctx1.getImageData(0,0,a.state.vw,a.state.vh),t=e.data.length,n=0;n<t;n+=4){var s=e.data[n+0],i=e.data[n+1],o=e.data[n+2];"green"===a.props.chromaKey?i>s+o&&(e.data[n+3]=0):"red"===a.props.chromaKey?s>i+o&&(e.data[n+3]=0):"blue"===a.props.chromaKey?o>s+i&&(e.data[n+3]=0):"black"===a.props.chromaKey?i<=177&&s<=177&&o<=177&&(e.data[n+3]=0):"custom"===a.props.chromaKey&&i>=a.props.lowerBound&&i<=a.props.upperBound&&s>=a.props.lowerBound&&s<=o>=a.props.lowerBound&&a.props.upperBound&&o<=a.props.upperBound&&(e.data[n+3]=0)}a.ctx2.putImageData(e,0,0)}},a.videoElement=s.a.createRef(),a.canvasElement1=s.a.createRef(),a.canvasElement2=s.a.createRef(),a.ctx1=null,a.ctx2=null,a.timeOut=null,a.state={averageColor:{r:0,g:0,b:0},vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.videoElement.current.addEventListener("ended",(function(){e.timeOut&&clearTimeout(e.timeOut),e.props.onComplete("randomcustomvideo")})),this.ctx1=this.canvasElement1.current.getContext("2d"),this.ctx2=this.canvasElement2.current.getContext("2d"),this.videoElement.current.addEventListener("play",(function(){e.timerCallback()}),!1),window.onresize=function(){e.setState({vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)})},this.videoElement.current.volume=this.props.volume,this.videoElement.current.play()}},{key:"render",value:function(){Math.ceil(7*Math.random());return Object(b.jsxs)("div",{style:{overflow:"hidden"},children:[Object(b.jsx)("video",{style:{display:"none"},src:this.props.url,controls:!1,crossOrigin:"anonymous",ref:this.videoElement}),Object(b.jsx)("canvas",{height:this.state.vh,width:this.state.vw,style:{display:"none"},ref:this.canvasElement1}),Object(b.jsx)("canvas",{height:this.state.vh,width:this.state.vw,style:{border:"1px solid black"},ref:this.canvasElement2})]})}}]),n}(s.a.Component),L=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).consumer=function(){if(a.ws.hasNext()&&!a.state.currentEvent){console.log("EVENT");var e=a.ws.next();a.setState({currentEvent:e})}else console.log("SKIPPING: ".concat(a.ws.hasNext()," || ").concat(a.state.currentEvent))},a.reset=function(){a.setState({currentEvent:null})},a.ws=null,a.interval=null,a.state={currentEvent:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(window.location.search);this.ws=f("MULTI",["BIRDUP","BADAPPLE","VIDEO","DYNAMIC"],e.get("channelId")),this.ws.connect(),setInterval(this.consumer,5e3)}},{key:"componentWillUnmount",value:function(){this.ws.disconnect()}},{key:"render",value:function(){var e=null;if(!this.state.currentEvent)return Object(b.jsx)("div",{});switch(this.state.currentEvent.type){case"BIRDUP":e=Object(b.jsx)(E,{onComplete:this.reset,requester:this.state.currentEvent.eventData.requester});break;case"VIDEO":e=Object(b.jsx)(D,{onComplete:this.reset,url:this.state.currentEvent.eventData.url,volume:this.state.currentEvent.eventData.volume,chromaKey:this.state.currentEvent.eventData.chromaKey});break;case"DYNAMIC":"ZELDA2"===this.state.currentEvent.eventData.raidTheme?e=Object(b.jsx)(C,{onComplete:this.reset,variable:this.state.currentEvent.eventData.variable}):"STORED"===this.state.currentEvent.eventData.raidTheme&&(e=Object(b.jsx)(R,{onComplete:this.reset,variable:this.state.currentEvent.eventData.variable,config:this.state.currentEvent.eventData.raidCustomTheme}))}return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"multContainer",children:[e,Object(b.jsx)("span",{className:"alert-text",children:this.state.currentEvent.eventData.message})]})})}}]),n}(s.a.Component),N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).consumer=Object(k.a)(O.a.mark((function e(){var t,n,s,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.ws.hasNext()&&!a.consumerLocked){e.next=2;break}return e.abrupt("return");case 2:return t=a.ws.next(),n=t.eventData,s=n.url,i=n.volume,a.consumerLocked=!0,o=new Audio(s),a.setState({soundPlaying:!0}),o.addEventListener("ended",(function(){a.setState({soundPlaying:!1}),setTimeout((function(){a.consumerLocked=!1}),5e3)})),o.volume=i,e.next=11,o.play();case 11:case"end":return e.stop()}}),e)}))),a.ws=null,a.consumerLocked=!1,a.state={soundPlaying:!1,requester:null,mediaName:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(window.location.search);this.ws=f("SOUND_PLAYER",["AUDIO"],e.get("channelId")),this.ws.connect(),setInterval(this.consumer,5e3)}},{key:"componentWillUnmount",value:function(){this.ws.disconnect()}},{key:"render",value:function(){return Object(b.jsx)("div",{style:{height:"100vh",width:"100vw",userSelect:"none"},className:"App",children:this.state.soundPlaying?Object(b.jsxs)("div",{children:[Object(b.jsx)("img",{style:{position:"absolute",width:"100px",height:"100px",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},src:"".concat("","/images/speaker.png")}),Object(b.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"20pt",WebkitTextStroke:"1px black",WebkitTextFillColor:"white"},children:this.state.message})]}):null})}}]),n}(s.a.Component),M=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Speech Synthesis Tester"}),Object(b.jsxs)("table",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"SpeechSynthesisUtterance Supported"}),Object(b.jsx)("td",{children:SpeechSynthesisUtterance?"Yes":"No"})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"window.speechSynthesis Supported"}),Object(b.jsx)("td",{children:window.speechSynthesis?"Yes":"No"})]})]}),Object(b.jsx)("button",{onClick:function(){!function(){var e=new SpeechSynthesisUtterance;e.text="This is a test of the web standard Speech Synthesis module.  If you can hear this, the test was a success.",window.speechSynthesis.speak(e)}()},children:"Test Speech Synthesis"})]})},U=function(e){var t=Math.floor(e/60),n=Math.floor(e%60),a=Math.floor(1e3*(e-Math.trunc(e)));return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),".").concat(a.toString().padStart(3,"0"))},W=function(e,t){return"data:text/vtt;base64,"+btoa(function(e,t){return t&&""!==t||(t="[Missing Audio]"),"WEBVTT\n\n"+e.map((function(e){return!t||"[male_dub]"!==e.text&&"[female_dub]"!==e.text?"".concat(U(e.startTime)," --\x3e ").concat(U(e.endTime),"\n").concat(e.text):"".concat(U(e.startTime)," --\x3e ").concat(U(e.endTime),"\n").concat(t)})).join("\n\n")}(e,t))},F=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).videoElement=s.a.createRef(),a.timeOut=null,a.currentIndex=-1,a.isTalking=!1,a.hasEnded=!1,a.state={vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),muted:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.onresize=function(){e.setState({vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)})},this.videoElement.current.play(),this.zombieInterval=window.setInterval((function(){if(console.log("CHECKING FOR ZOMBIES"),console.log("IS TALKING? "+e.isTalking),console.log("HAS ENDED?  "+e.hasEnded),!e.isTalking&&e.hasEnded)return console.log("OKAY, NOW I'M DONE."),e.pauseListener(),void e.props.onComplete()}),3e3)}},{key:"componentWillUnmount",value:function(){console.log("SHIT"),window.clearInterval(this.zombieInterval)}},{key:"setIsTalking",value:function(e){this.isTalking=e}},{key:"setMuted",value:function(e){this.setState({muted:e})}},{key:"setCurrentIndex",value:function(e){this.currentIndex=e}},{key:"speak",value:function(e,t){var n=this,a=null;this.setIsTalking(!0),a="[male_dub]"===e.text?window.maleVoice:window.femaleVoice;var s=new SpeechSynthesisUtterance;s.voice=a,s.text=t,s.onend=function(){console.log("SPEAKING HAS ENDED"),n.setIsTalking(!1),document.getElementById("videoElement").play()},window.speechSynthesis.speak(s)}},{key:"updateSubtitle",value:function(e){var t=this.props.subtitles.findIndex((function(t){return e.currentTime>t.startTime&&e.currentTime<t.endTime}));if(t!==this.currentIndex){if(this.isTalking)return void e.pause();if(this.currentIndex>=0){var n=this.props.subtitles[this.currentIndex];"[male_dub]"!==n.text&&"[female_dub]"!==n.text||this.setMuted(!1)}if(t>=0){var a=this.props.subtitles[t];"[male_dub]"!==a.text&&"[female_dub]"!==a.text||(this.setMuted(!0),this.props.substitution&&this.speak(a,this.props.substitution))}this.setCurrentIndex(t)}}},{key:"startListener",value:function(){var e=this;this.interval=setInterval((function(){var t=document.getElementById("videoElement");t?e.updateSubtitle(t):e.pauseListener()}),1e3/60)}},{key:"pauseListener",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this;return Object(b.jsx)("div",{style:{overflow:"hidden",width:"100vw",height:"100vh",position:"relative"},children:Object(b.jsx)("div",{style:{position:"absolute",top:"0px",width:"100%",height:"100vh",zIndex:9998,backgroundColor:"black"},children:Object(b.jsx)("video",{id:"videoElement",src:this.props.url,style:{width:this.state.vw,height:this.state.vh},controls:!1,crossOrigin:"anonymous",onPlay:function(){e.startListener()},onPause:function(){e.pauseListener()},onEnded:function(){e.isTalking?(console.log("DONE"),e.pauseListener(),e.props.onComplete()):(console.log("NOT QUITE DONE"),e.hasEnded=!0)},muted:this.state.muted,ref:this.videoElement,children:Object(b.jsx)("track",{label:"English",kind:"subtitles",srcLang:"en",src:W(this.props.subtitles,this.props.substitution),default:!0})})})})}}]),n}(s.a.Component),A=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).consumer=function(){if(a.ws.hasNext()&&!a.state.currentEvent){var e=a.ws.next();e.eventData.substitution&&(e.eventData.substitution=e.eventData.substitution.replace(/[^\x00-\x7F]/g,"")),a.setState({currentEvent:e})}},a.ws=null,a.state={currentEvent:null,joinedMiniGame:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(window.location.search);this.ws=f("WTD",["DUB"],e.get("channelId")),this.ws.connect(),setInterval(this.consumer,0)}},{key:"componentWillUnmount",value:function(){this.ws.disconnect()}},{key:"render",value:function(){var e=this;return this.state.currentEvent&&this.state.joinedMiniGame?Object(b.jsxs)("div",{style:{backgroundColor:"black"},children:[Object(b.jsx)("div",{style:{position:"absolute",top:"0px",left:"0px",width:"20vw",zIndex:9999},children:Object(b.jsx)("img",{style:{width:"20vw"},src:"images/wtd.png"})}),this.state.currentEvent.eventData.requester?Object(b.jsxs)("span",{style:{position:"absolute",top:"0px",left:"50%",transform:"translateX(-50%)",fontSize:"20pt",WebkitTextStroke:"1px black",WebkitTextFillColor:"white",zIndex:"9999"},children:["Submitted By ",this.state.currentEvent.eventData.requester]}):null,Object(b.jsx)(F,{url:this.state.currentEvent.eventData.videoData.videoUrl,subtitles:this.state.currentEvent.eventData.videoData.subtitles,substitution:this.state.currentEvent.eventData.substitution,onComplete:function(){e.setState({currentEvent:null})}})]}):Object(b.jsxs)("div",{style:{background:"black",height:"100vh"},children:[Object(b.jsx)("div",{style:{position:"absolute",top:"0px",left:"0px",width:"20vw",zIndex:9999},children:Object(b.jsx)("img",{style:{width:"20vw"},src:"images/wtd.png"})}),Object(b.jsx)("div",{style:{position:"absolute",width:"100vw",textAlign:"center",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"20pt",WebkitTextStroke:"1px black",WebkitTextFillColor:"white"},children:'Submit your answer with the command "!games:wtd:answer" followed by your submission!'}),this.state.joinedMiniGame?null:Object(b.jsx)("button",{onClick:function(){e.setState({joinedMiniGame:!0})},style:{position:"absolute",bottom:"0px",right:"0px",width:"200px",height:"100px"},children:"Click to Join Mini Games"})]})}}]),n}(s.a.Component),P={YOSHI:{message:"Incoming raid from ${raider} with a party of ${raidSize}!",sprites:[{file:"/images/yoshi/yoshi-walk.png",startFrame:0,endFrame:9,frameWidth:128,frameHeight:128,frameRate:15},{file:"/images/yoshi/yoshi-walk-black.png",startFrame:0,endFrame:9,frameWidth:128,frameHeight:128,frameRate:15},{file:"/images/yoshi/yoshi-walk-blue.png",startFrame:0,endFrame:9,frameWidth:128,frameHeight:128,frameRate:15},{file:"/images/yoshi/yoshi-walk-pink.png",startFrame:0,endFrame:9,frameWidth:128,frameHeight:128,frameRate:15},{file:"/images/yoshi/yoshi-walk-purple.png",startFrame:0,endFrame:9,frameWidth:128,frameHeight:128,frameRate:15},{file:"/images/yoshi/yoshi-walk-yellow.png",startFrame:0,endFrame:9,frameWidth:128,frameHeight:128,frameRate:15}],music:{file:"/sounds/yoshi/yoshi-fanfare.mp3",volume:1},leavingSound:{file:"/sounds/yoshi/yoshi-tongue.mp3",volume:1}},SKULLMAN:{message:"HOLY SHIT! ${raider} raided with a party of ${raidSize}!",sprites:[{file:"/images/skullman/skullman-walk.png",startFrame:0,endFrame:9,frameWidth:99,frameHeight:128,frameRate:15}],music:{file:"/sounds/skullman/battle.mp3",volume:1},leavingSound:{file:"/sounds/skullman/ash-groovy.mp3",volume:3}},CHAIR:{message:"CHEESE IT UP! ${raider} raided with a party of ${raidSize}!",sprites:[{file:"/images/chair/cheesesteak-walk.png",startFrame:0,endFrame:5,frameWidth:128,frameHeight:128,frameRate:15},{file:"/images/chair/yuu.png",startFrame:24,endFrame:29,frameWidth:128,frameHeight:128,frameRate:15},{file:"/images/chair/tanako.png",startFrame:30,endFrame:41,frameWidth:128,frameHeight:128,frameRate:15}],music:{file:"/sounds/chair/music.mp3",volume:1},leavingSound:{file:"/sounds/chair/cheeseitup.wav",volume:1}}},H=n(40),z=n.n(H),B=function(){var e=Object(k.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("https://deusprogrammer.com/api/streamcrabs/dynamic-alerts/".concat(t),{headers:{"X-Access-Token":localStorage.getItem("accessToken")}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)("daddyfartbux"),o=Object(j.a)(i,2),r=o[0],c=o[1],l=Object(a.useState)(100),u=Object(j.a)(l,2),h=u[0],d=u[1],m=Object(a.useState)("CUSTOM"),p=Object(j.a)(m,2),v=p[0],f=p[1],g=Object(a.useState)("SKULLMAN"),x=Object(j.a)(g,2),w=x[0],y=x[1],S=Object(a.useState)({}),E=Object(j.a)(S,2),T=E[0],I=E[1];Object(a.useEffect)(Object(k.a)(O.a.mark((function e(){var t,n,a,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new URLSearchParams(window.location.search),n=t.get("theme"),a=t.get("key"),c(t.get("raider")?t.get("raider"):"daddyfartbux"),d(t.get("raidSize")?t.get("raidSize"):10),f(t.get("theme")?t.get("theme"):"YOSHI"),y(t.get("key")?t.get("key"):"SKULLMAN"),"STORED"!==n){e.next=12;break}return e.next=10,B(a);case 10:s=e.sent,I(s);case 12:case"end":return e.stop()}}),e)}))),[]);var D=null;switch(v){case"ZELDA":D=Object(b.jsx)(C,{variable:h,onComplete:function(){s(!1)}});break;case"CUSTOM":D=Object(b.jsx)(R,{variable:h,config:P[w],onComplete:function(){s(!1)}});case"STORED":D=Object(b.jsx)(R,{variable:h,config:T,onComplete:function(){s(!1)}})}return Object(b.jsx)("div",{children:n?Object(b.jsxs)("div",{children:[D,Object(b.jsx)("span",{className:"alert-text",children:"".concat(r," is raiding with ").concat(h," viewers.")})]}):Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:["Testing with size ",Object(b.jsx)("b",{children:h})," and raider ",Object(b.jsx)("b",{children:r})]}),Object(b.jsx)("button",{onClick:function(){s(!0)},children:"Click to Test"}),Object(b.jsx)("h3",{children:"Debug"}),Object(b.jsx)("pre",{children:JSON.stringify(T,null,5)})]})})},G=n(41),K=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).consumer=function(){if(a.ws.hasNext()&&!a.consumerLocked){var e=a.ws.next().eventData,t=e.requester,n=e.text;a.consumerLocked=!0;var s=new SpeechSynthesisUtterance;s.text="".concat(t," said: '").concat(n,"'"),s.voice=window.maleVoice;var i=Object(G.a)(a.state.textList);i.push("- "+s.text),window.speechSynthesis.speak(s),a.setState({textList:i}),s.onend=function(){setTimeout((function(){a.consumerLocked=!1}),5e3)}}},a.start=function(){var e=new URLSearchParams(window.location.search);a.ws=f("TTS",["TTS"],e.get("channelId")),a.ws.connect(),setInterval(a.consumer,0),a.setState({started:!0,textList:["** Connected to Websocket **"]})},a.consumerLocked=!1,a.state={soundPlaying:!1,requester:null,mediaName:null,started:!1,textList:[]},a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){this.ws.disconnect()}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"TTS Tool (Open in Browser, not in Streaming Tool)"}),this.state.started?Object(b.jsx)("button",{disabled:!0,children:"TTS Activated"}):Object(b.jsx)("button",{onClick:function(){e.start()},children:"Activate TTS"}),Object(b.jsx)("h3",{children:"Log"}),Object(b.jsx)("pre",{style:{backgroundColor:"gray",color:"white",width:"80%",height:"500px",marginLeft:"10px"},children:this.state.textList.map((function(e){return" "+e+"\n"}))})]})}}]),n}(s.a.Component),V=function(){var e=Object(a.useState)(null),t=Object(j.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(0),o=Object(j.a)(i,2),r=o[0],c=o[1],l=Object(a.useState)(255),u=Object(j.a)(l,2),h=u[0],d=u[1],m=Object(a.useState)(!0),p=Object(j.a)(m,2),v=p[0],f=p[1],g=new URLSearchParams(window.location.search),x=g.get("videoUrl"),w=g.get("backgroundUrl");return Object(b.jsxs)("div",{style:{background:"url(".concat(w,")")},children:[v?Object(b.jsx)(D,{url:x,volume:1,chromaKey:n,lowerBound:r,upperBound:h,onComplete:function(){f(!1),setTimeout((function(){f(!0)}),500)}}):null,Object(b.jsxs)("div",{style:{position:"absolute",bottom:"0px",width:"100vw",textAlign:"center",zIndex:"9999"},children:[Object(b.jsx)("label",{children:"Chroma Key\xa0"}),Object(b.jsxs)("select",{onChange:function(e){var t=e.target.value;s(t)},children:[Object(b.jsx)("option",{children:"None"}),Object(b.jsx)("option",{value:"red",children:"Red"}),Object(b.jsx)("option",{value:"green",children:"Green"}),Object(b.jsx)("option",{value:"blue",children:"Blue"}),Object(b.jsx)("option",{value:"black",children:"Black"}),Object(b.jsx)("option",{value:"custom",children:"Custom"})]}),Object(b.jsx)("br",{}),"custom"===n?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("label",{children:"Lower Bound"}),Object(b.jsx)("input",{type:"range",value:r,max:255,onChange:function(e){var t=e.target.value;c(t)}}),Object(b.jsx)("span",{children:r}),Object(b.jsx)("br",{}),Object(b.jsx)("label",{children:"Upper Bound"}),Object(b.jsx)("input",{type:"range",value:h,max:255,onChange:function(e){var t=e.target.value;d(t)}}),Object(b.jsx)("span",{children:h})]}):null]})]})},_=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(b.jsx)(h.a,{children:Object(b.jsxs)(d.c,{children:[Object(b.jsx)(d.a,{path:"".concat("","/tts"),component:K,exact:!0}),Object(b.jsx)(d.a,{path:"".concat("","/wtd"),component:A,exact:!0}),Object(b.jsx)(d.a,{path:"".concat("","/speech/test"),component:M,exact:!0}),Object(b.jsx)(d.a,{path:"".concat("","/multi"),component:L,exact:!0}),Object(b.jsx)(d.a,{path:"".concat("","/death-counter"),component:g,exact:!0}),Object(b.jsx)(d.a,{path:"".concat("","/sound-player"),component:N,exact:!0}),Object(b.jsx)(d.a,{path:"".concat("","/requests"),component:w,exact:!0}),Object(b.jsx)(d.a,{path:"".concat("","/raid-test"),component:q,exact:!0}),Object(b.jsx)(d.a,{path:"".concat("","/video-test"),component:V,exact:!0}),Object(b.jsx)(d.a,{path:"".concat("","/tools/raid-test"),component:q,exact:!0}),Object(b.jsx)(d.a,{path:"".concat("","/tools/video-test"),component:V,exact:!0}),Object(b.jsx)(d.a,{path:"".concat("","/overlays/multi"),component:L,exact:!0}),Object(b.jsx)(d.a,{path:"".concat("","/overlays/death-counter"),component:g,exact:!0}),Object(b.jsx)(d.a,{path:"".concat("","/overlays/sound-player"),component:N,exact:!0}),Object(b.jsx)(d.a,{path:"".concat("","/overlays/requests"),component:w,exact:!0}),Object(b.jsx)(d.a,{path:"".concat("","/"),component:x})]})})}}]),n}(s.a.Component),Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),i(e),o(e)}))};window.speechSynthesis.onvoiceschanged=function(){window.maleVoice=window.speechSynthesis.getVoices().find((function(e){return"Microsoft David - English (United States)"===e.name})),window.femaleVoice=window.speechSynthesis.getVoices().find((function(e){return"Microsoft Zira - English (United States)"===e.name})),console.log("MAN:   "+window.maleVoice),console.log("WOMAN: "+window.femaleVoice)},o.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(_,{})}),document.getElementById("root")),Y()}},[[77,1,2]]]);
//# sourceMappingURL=main.e5c7ca77.chunk.js.map